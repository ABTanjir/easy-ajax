"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(e){"use strict";var t={init:function(t,n){console.log("initializez..."),self=this,self.elem=n,self.$elem=e(n),self.$elem.content=self.$elem.find(":submit").html(),self.options=e.extend({},e.fn.easyajax.options,t),self.setTrigger()},setTrigger:function(){var t=this;console.log("trigger set...."),"form"==t.$elem.prop("tagName").toLowerCase()?t.$elem.on("submit",function(n){n.preventDefault();var a=null;if(t.$elem.hasClass("needs-validation")&&(!1===t.elem.checkValidity()?(n.preventDefault(),n.stopPropagation(),a=!1):a=!0,t.$elem.hasClass("was-validated")||t.realTimeValidate(),t.elem.classList.add("was-validated")),t.$elem.find(".form-control").each(function(t,n){e(n).parent().find(".invalid-feedback").length?e(n).parent().find(".invalid-feedback").text(n.validationMessage):e(n).parent().append('<em id="'+e(n).attr("name")+'-error" class="error invalid-feedback">'+n.validationMessage+"</em>")}),!1===a)return!1;t.$elem.data("confirm")?t.sweetConfirm(t.$elem.data("confirm"),"Click ok if you want to proceed",function(e){e&&t.postRequest(n)}):t.postRequest(n)}):t.$elem.on("click",function(e){e.preventDefault(),"a"===e.target.tagName.toLowerCase()&&(t.$elem.data("confirm")?t.sweetConfirm(t.$elem.data("confirm"),"Click ok if you want to proceed",function(e){e&&t.getRequest()}):t.getRequest())})},realTimeValidate:function(){console.log("Realtime validation started..."),this.$elem.on("input",function(t){t.preventDefault(),console.log("validationg..."),e(this).closest("form").find(".form-control").each(function(n,a){if(0==t.target.validationMessage.length)return e(t.target).removeClass("is-invalid"),!0;e(a).parent().find(".invalid-feedback").length?e(a).parent().find(".invalid-feedback").text(a.validationMessage):e(a).parent().append('<em id="'+e(a).attr("name")+'-error" class="error invalid-feedback">'+a.validationMessage+"</em>")})})},render_to:function(t){e(t.render_to).html(t.html).trigger("changed"),this.options.after_render(this.$elem,t)},notification:function(e){"success"!=e.status?this.$elem.find(":submit").prop("disabled",!1):"function"==typeof this.$elem.closest(".modal").modal&&this.$elem.closest(".modal").modal("hide"),"function"==typeof this.options.notification?this.options.notification(this.$elem,e):"undefined"!=typeof toastr&&(toastr.options={debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-bottom-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr[e.status](e.message))},rerender:function(t){var n=window.location.href;e.ajax({url:n,type:"GET",success:function(t){t=e.parseHTML(t);if(e(t).find(t.rerender)||(t.rerender=".app-content"),e(t.rerender).html(e(t).find(t.rerender).html()).trigger("change"),0!=t.scriptReload){var n=e("#reloadable").html();e("#reloadable").html("").html(n)}}})},remove:function(t){this.$elem.closest(t.remove).css({background:"#b2bec3",transition:"linear background .3s"}).delay(300).queue(function(){e(this).remove()})},validate:function(){e(".form-control").each(function(t,n){e(n).parent().find(".invalid-feedback").length?e(n).parent().find(".invalid-feedback").text(n.validationMessage):e(n).parent().append('<em id="'+e(n).attr("name")+'-error" class="error invalid-feedback">'+n.validationMessage+"</em>")})},isJson:function(e){return"object"==typeof e},sweetConfirm:function(e,t,n){"undefined"!=typeof Swal?Swal.fire({title:e,text:t,type:"warning",showCancelButton:!0}).then(e=>{n(e&&1==e.value)}):confirm(e)&&n(!0)},getRequest:function(){var t=this,n=t.$elem.attr("href");t.options.before_ajax(t.$elem),e.get(n,function(n,a){t.options.after_ajax(t.$elem,n),"success"==a?(t.isJson(n)||(n=JSON.parse(n)),n.message&&t.notification(n),n.render_to&&t.render_to(n),n.rerender&&t.rerender(n),n.remove&&t.remove(n),n.empty&&e(n.empty).html(""),n.reset&&e(_self).trigger("reset"),n.refresh&&setTimeout(function(){window.location.reload(1)},n.refresh)):t.options.error_ajax(t.$elem,xhr)})},postRequest:function(t){var n=this,a=n.$elem.find(":submit");a.prop("disabled",!0),n.options.autoEnable&&setTimeout(function(){a.html(n.$elem.content),a.prop("disabled",!1)},n.options.autoEnable);var o=n.$elem.attr("action"),i=n.$elem.attr("method"),r=new FormData(n.elem);n.options.before_ajax(n.$elem),e.ajax({type:i,url:o,processData:!1,contentType:!1,data:r,success:function(t){n.options.after_ajax(n.$elem,t),n.isJson(t)||(t=JSON.parse(t)),t.message&&n.notification(t),t.render_to&&n.render_to(t),t.rerender&&n.rerender(t),t.remove&&n.remove(t),t.empty&&e(t.empty).html(""),t.reset&&(e(".select2").val(""),e(".select2").trigger("change"),e(".select2-tag").val(""),e(".select2-tag").trigger("change"),e(_self).trigger("reset")),t.refresh&&setTimeout(function(){window.location.reload(1)},t.refresh)},error:function(e){n.options.error_ajax(n.$elem,e),a.html(n.$elem.content),a.prop("disabled",!1)}})}};e.fn.easyajax=function(e){return this.each(function(){Object.create(t).init(e,this)})},e.fn.easyajax.options={autoEnable:5e3,notification:null,after_render:function(e,t){},before_ajax:function(e,t){},after_ajax:function(e,t){},error_ajax:function(e,t){}}}(jQuery);